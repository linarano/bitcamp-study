<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>변수활용</title>
</head>
<body>
<h1>계산기 - client-side rendering</h1>
<form>
<input type="text" name="v1">
<select name ="op">
<option>+</option>
<option>-</option>
<option>*</option>
<option>/</option>
<option>%</option>
</select>
<input type= "text" name="v2">
<button type="button" id="x-btn">=</button>
<input id="x-result" type= "text" >

</form>

<script>

//입렵폼의 각 태그를찾는다.
var xV1 = document.querySelector("input[name='v1']");
var xV2 = document.querySelector("input[name='v2']");
var xOp = document.querySelector("select[name='op']");
var xBtn = document.querySelector("#x-btn");
var xResult = document.querySelector("#x-result");

//CONSOLE.LOG로 그때그떄 확인 
//type 기본설정이 "submit" - 서버요청 액션지정안하면 현재URL
//버튼을 클릭하면 웹브라우저에서 별도의 요청을 수행한다.

//1) 버튼을 클릭했을 때 수행할 작업을 등록한다. 
xBtn.onclick = function(){


//서버에 요청할 때 사용할 도구를 준비한다.
var xhr = new XMLHttpRequest();

//서버에서 응답을 받았을 때(load이벤트 발생) 호출 될 함수를 등록한다.
xhr.addEventListener("load", function(){
xResult.value = xhr.responseText;// 서버에서 받은결과를 집어넣어 인풋박스에 넣어줘
});

//서버와 연결한다.
//주의!
//-웹브라우저에서 직접요청 할 때는 'URL 인코딩을 따로 처리하지않아도 된다.''
//왜? 웹브라우저가 알아서  URL인코딩을 해준다.
		//-자바스크립트를 이용해서 요청할 때는 개발자가 직접'URL인코딩'해야한다.
		//즉 URL 인코딩 
xhr.open(
		"GET", 
		"/lang/variable/exam4/test2?v1="+ xV1.value +"&v2="+ xV2.value +"&op="+ encodeURIComponent(xOp.value),
		true); //서버에 요청정보를 보낸다.
xhr.send();

};

</script>

</body>
</html>